name: rayo-backend
region: nyc
services:
- name: web
  dockerfile_path: Dockerfile
  git:
    branch: main
    repo_clone_url: https://github.com/Expand-My-Business/Rayo-backend.git
  health_check:
    http_path: /api/v1/health/live
  http_port: 8000
  instance_count: 1
  instance_size_slug: basic-xs
  routes:
  - path: /
  envs:
  - key: DATABASE_URL
    value: "YOUR_EXTERNAL_DATABASE_URL"
  - key: REDIS_URL
    value: "YOUR_EXTERNAL_REDIS_URL"
  - key: SENTRY_DSN
    value: "YOUR_SENTRY_DSN"
  - key: SUPABASE_URL
    value: "YOUR_SUPABASE_URL"
  - key: SUPABASE_KEY
    value: "YOUR_SUPABASE_KEY"
- name: worker
  dockerfile_path: Dockerfile
  git:
    branch: main
    repo_clone_url: https://github.com/Expand-My-Business/Rayo-backend.git
  run_command: celery -A app.worker.celery_app worker --loglevel=info
  instance_count: 1
  instance_size_slug: basic-xs
  envs:
  - key: DATABASE_URL
    value: "YOUR_EXTERNAL_DATABASE_URL"
  - key: REDIS_URL
    value: "YOUR_EXTERNAL_REDIS_URL"
  - key: SENTRY_DSN
    value: "YOUR_SENTRY_DSN"
  - key: SUPABASE_URL
    value: "YOUR_SUPABASE_URL"
  - key: SUPABASE_KEY
    value: "YOUR_SUPABASE_KEY"
